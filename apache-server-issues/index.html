<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="copyright" content="All content on www.nimblemachines.com is copyrighted. All rights are reserved." />
<meta name="robots" content="index,follow" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/-/screen.css" type="text/css" />
<link rel="canonical" href="https://www.nimblemachines.com/apache-server-issues/" />
<title>Apache server issues &ndash; Nimble Machines</title>
</head>
<body>

<div id="header">
<h1>Apache server issues</h1>
<hr />
</div>

<div id="content">
<p>The <a href="http://httpd.apache.org/">Apache HTTP server</a>, is a very capable but also very complicated piece of software. Configuring it seems to be an art form of sorts.</p>
<p>When this site was a wiki, it ran under Apache, using the Named Virtual Hosts feature (of Apache and of HTTP/1.1). Mostly Named Virtual Hosts work smoothly and flawlessly but there are occasional, and surprising, glitches.</p>
<p>One is the result of the following Alias directive, in the global server config, here to make pretty (ie, full of icons) directory indexes possible:</p>
<pre>
  Alias /icons/ "/usr/local/www/icons/"
</pre>
<p>What this means is that <em>any</em> request URI, <em>to any virtual host</em> (as it turns out), that is prefixed with "/icons/" will be mapped to "/usr/local/www/icons/" in the filesystem.</p>
<p>I didn&rsquo;t initially notice this because this site (when it was a wiki), was running in a subdirectory (&ldquo;wiki&rdquo;) of nimblemachines.com. This means that any request URIs looked like</p>
<pre>
  /wiki/&lt;something>
</pre>
<p>There are several icons that every page displays: the lambda at the top, and the two W3C validator icons at the bottom. They had (until I was forced to move them) the following (relative) URIs, respectively:</p>
<pre>
  icons/lambda.gif
  icons/valid-xhtml10.png
  icons/valid-css.png
</pre>
<p>and accessing them caused no problems because the request URIs looked like this:</p>
<pre>
  /wiki/icons/lambda.gif
  /wiki/icons/valid-xhtml10.png
  /wiki/icons/valid-css.png.
</pre>
<p>But when I tried running the same wiki code in another domain, but in that domain&rsquo;s <em>root directory</em>, I ran into a problem. Now the request URIs looked like this:</p>
<pre>
  /icons/lambda.gif
  /icons/valid-xhtml10.png
  /icons/valid-css.png
</pre>
<p>and Apache &ldquo;helpfully&rdquo; rewrote the initial "/icons/" with "/usr/local/www/icons/" and therefore could not find the icons for the wiki.</p>
<p>So, I had to rename my icons subdirectory to &ldquo;images&rdquo; so as not to conflict with Apache. Sigh.</p>
<p><em>Happily, this has since changed. Now that part of the Apache config file looks like this:</em></p>
<pre>
  #Alias /icons/ "/usr/local/www/icons/"
</pre>
<pre>
  #&lt;Directory "/usr/local/www/icons">
  #    Options Indexes MultiViews Includes
  #    AllowOverride None
  #    Order allow,deny
  #    Allow from all
  #&lt;/Directory>
</pre>
<hr />
<p>2013 January 23 16:00</p>
<p>There is no way <em>not</em> to consider the above behaviour a bug. I don&rsquo;t remember which version (or versions) of Apache exhibited this behaivour, or whether it has been fixed, but it was certainly a surprise.</p>

</div>

<div id="footer">
<hr />
<a href="mailto:%77%65%62%68%61%6d%73%74%65%72%40%6e%69%6d%62%6c%65%6d%61%63%68%69%6e%65%73%2e%63%6f%6d?subject=%5bNimble%20Machines%5d%20Apache%20server%20issues">Send feedback</a> on this page (last edited 2013 January 23 16:00)<br />
Browse <a href="/all-pages/">all pages</a>, or return <a href="/">home</a>
</div>

</body>
</html>
